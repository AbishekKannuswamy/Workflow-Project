<div class="max-w-md mx-auto p-8 bg-white rounded-xl shadow-2xl border border-gray-100 mt-8 mb-8">
  <h2 class="text-3xl font-extrabold text-gray-900 mb-8 text-center">Create Your Account</h2>
  <form (ngSubmit)="onRegister()" class="space-y-6">

    <!-- Username Field -->
    <div>
      <div *ngIf="usernameError" class="text-red-600 text-xs font-semibold mb-1 ml-1 px-2 py-1 bg-red-100 rounded-md">
        {{ usernameError }}
      </div>
      <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
      <input
        type="text"
        id="username"
        name="username"
        [(ngModel)]="username"
        (blur)="validateUsername()"
        class="block w-full px-4 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base text-gray-900"
        [class.border-red-500]="usernameError"
        placeholder="Choose a username"
        required
      >
    </div>

    <!-- Email Address Field -->
    <div>
      <div *ngIf="emailError" class="text-red-600 text-xs font-semibold mb-1 ml-1 px-2 py-1 bg-red-100 rounded-md">
        {{ emailError }}
      </div>
      <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        (blur)="validateEmail()"
        class="block w-full px-4 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base text-gray-900"
        [class.border-red-500]="emailError"
        placeholder="your.email@example.com"
        required
      >
    </div>

    <!-- Password Field with Eye Icon -->
    <div>
      <div *ngIf="passwordError" class="text-red-600 text-xs font-semibold mb-1 ml-1 px-2 py-1 bg-red-100 rounded-md">
        {{ passwordError }}
      </div>
      <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
      <div class="relative">
        <input
          [type]="passwordFieldType" 
          id="password"
          name="password"
          [(ngModel)]="password"
          (blur)="validatePassword()"
          class="block w-full px-4 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base text-gray-900 pr-10"
          [class.border-red-500]="passwordError"
          placeholder="Enter your password"
          required
        >
        <!-- Eye Icon -->
        <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 cursor-pointer text-gray-400 hover:text-gray-600"
              (mousedown)="togglePasswordVisibility(true)"
              (mouseup)="togglePasswordVisibility(false)"
              (mouseleave)="togglePasswordVisibility(false)"> <!-- Add mouseleave for better UX -->
          <i class="fa-solid fa-eye"></i> <!-- Font Awesome eye icon -->
        </span>
      </div>
    </div>

    <!-- Confirm Password Field with Eye Icon -->
    <div>
      <div *ngIf="confirmPasswordError" class="text-red-600 text-xs font-semibold mb-1 ml-1 px-2 py-1 bg-red-100 rounded-md">
        {{ confirmPasswordError }}
      </div>
      <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
      <div class="relative">
        <input
          [type]="confirmPasswordFieldType" 
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          (blur)="validateConfirmPassword()"
          class="block w-full px-4 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base text-gray-900 pr-10" 
          [class.border-red-500]="confirmPasswordError"
          placeholder="Confirm your password"
          required
        >
        <!-- Eye Icon -->
        <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 cursor-pointer text-gray-400 hover:text-gray-600"
              (mousedown)="toggleConfirmPasswordVisibility(true)"
              (mouseup)="toggleConfirmPasswordVisibility(false)"
              (mouseleave)="toggleConfirmPasswordVisibility(false)"> <!-- Add mouseleave for better UX -->
          <i class="fa-solid fa-eye"></i> <!-- Font Awesome eye icon -->
        </span>
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-300"
      [disabled]="isRegistering"
    >
      <span *ngIf="!isRegistering">Register</span>
      <span *ngIf="isRegistering">Registering...</span>
    </button>
  </form>
</div>
